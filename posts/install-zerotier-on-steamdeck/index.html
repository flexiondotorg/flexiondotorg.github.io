<!doctype html><html lang=en-gb><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=description content="Blog, Podcasts, Live Streams and Videos about Linux and Open Source with a focus on Ubuntu, Debian and NixOS."><meta name=author content="Martin Wimpress"><meta name=keywords content="Steam Deck,ZeroTier,Gaming,Arch Linux,Nix"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wimpysworld.com/hero.webp"><meta name=twitter:title content="Install ZeroTier on Steam Deck"><meta name=twitter:description content="How to persist software installation across SteamOS updates on the Steam Deck."><meta name=twitter:site content="@m_wimpress"><meta name=msapplication-TileColor content="#00aba9"><meta name=theme-color content="#ffffff"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=stylesheet href=/css/style.css type=text/css media=print onload='this.media="all"'><link rel=stylesheet href=/css/fonts.css type=text/css media=print onload='this.media="all"'><link rel=stylesheet href=/css/syntax.css type=text/css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css type=text/css media=print onload='this.media="all"' crossorigin=anonymous referrerpolicy=no-referrer integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="><noscript><link rel=stylesheet href=/css/style.css type=text/css><link rel=stylesheet href=/css/fonts.css type=text/css><link rel=stylesheet href=/css/syntax.css type=text/css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css type=text/css crossorigin=anonymous referrerpolicy=no-referrer integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="></noscript><link rel=canonical href=https://wimpysworld.com/posts/install-zerotier-on-steamdeck/><title>Install ZeroTier on Steam Deck</title></head><body><nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id=mainNav><div class=container><a class=navbar-brand href=/>Wimpy's World</a>
<button class="navbar-toggler text-uppercase font-weight-bold bg-primary text-white rounded" type=button data-bs-toggle=collapse data-bs-target=#navbarResponsive aria-controls=navbarResponsive aria-expanded=false aria-label="Toggle navigation">
Menu<em class="fas fa-bars"></em></button><div class="collapse navbar-collapse" id=navbarResponsive><ul class="navbar-nav ms-auto"><li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href=https://wimpysworld.com/about/>About</a></li><li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href=https://wimpysworld.com/live/>Live</a></li><li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href=https://wimpysworld.com/posts/>Posts</a></li><li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href=https://wimpysworld.com/projects/>Projects</a></li></ul><form class="form-inline mx-4 my-0" action=/search method=get><div class=input-group><input class=form-control type=search name=q id=search-query placeholder=Search>
<button class="btn btn-primary btn-sm" id=searchButton type=submit><span class="fas fa-search"></span></button></div></form></div></div></nav><header class="masthead2 text-white text-center"></header><div class="container pb-1"><div class=row><section class="page-section portfolio col-12 col-lg-10"><img class="card-img-top img-fluid rounded mt-4" src=https://wimpysworld.com/posts/install-zerotier-on-steamdeck/hero.webp width=1280 height=720 alt="How to persist software installation across SteamOS updates on the Steam Deck." loading=lazy><div class="page-section-heading text-center text-secondary mt-3"><b>How to persist software installation across SteamOS updates on the Steam Deck.</b></div><div class="divider-custom m-1"><div class=divider-custom-line></div><div class="divider-custom-icon text-secondary"><em class="fas fa-file-text"></em></div><div class=divider-custom-line></div></div><div class="row mb-2"><div class="col text-center text-nowrap"><a class=h4 href=/tags/arch-linux/ title="Arch Linux"><span class="badge bg-primary p-2 m-1">Arch Linux</span></a>
<a class=h4 href=/tags/gaming/ title=Gaming><span class="badge bg-primary p-2 m-1">Gaming</span></a>
<a class=h4 href=/tags/nix/ title=Nix><span class="badge bg-primary p-2 m-1">Nix</span></a>
<a class=h4 href=/tags/steam-deck/ title="Steam Deck"><span class="badge bg-primary p-2 m-1">Steam Deck</span></a>
<a class=h4 href=/tags/zerotier/ title=ZeroTier><span class="badge bg-primary p-2 m-1">ZeroTier</span></a></div></div><div class="row justify-content-left"><p>It took 9 episodes of <a href=https://linuxmatters.sh>Linux Matters</a> for my friends and co-hosts <a href=https://linuxmatters.sh/host/apope/>Alan</a> and <a href=https://linuxmatters.sh/host/mjohnson/>Mark</a> to wear down üòÖ my resolve to buy a <a href=https://www.steamdeck.com/en/>Steam Deck</a>, even <a href=/posts/steambox-vs-steamdeck/>after I passed on my original Steam Deck pre-order</a>.
I&rsquo;m glad they did, it&rsquo;s a great little device and a dream come true for Linux üêß nerds; excellent hardware and completely hackable üßë‚Äçüíª</p><p>I ordered the 64GB model via the recently announced <a href=https://store.steampowered.com/sale/steamdeckrefurbished>Steam Deck‚Ñ¢ Certified Refurbished</a> program.
I&rsquo;m going to resist retrofitting a larger NVMe SSD, and have instead added a 1TB microSDXC card üíæ
The 64GB internal eMMC storage will be used for SteamOS and the microSDXC card will be used exclusively for games üïπÔ∏è</p><p>While I&rsquo;m avoiding hardware modifications, I do want to install some software enhancements on the Steam Deck; specifically <a href=https://www.zerotier.com/>ZeroTier</a>.
<strong>I spoke enthusiastically about ZeroTier in <a href=https://linuxmatters.sh/episodes/8/>Linux Matters: Picking Apart the Steam Deck (Episode 8)</a></strong>; it is as essential as WiFi for me.
So, give that episode a listen to hear why I love ZeroTier so much üíñ</p><p class=text-center><a href=https://linuxmatters.sh target=_blank><img src=https://linuxmatters.sh/img/episode/linuxmatters-banner-3000x750.webp class=img-fluid alt="Linux Matters Podcast"></a><br><em>Linux Matters Podcast</em></p><p>What follows is a guide to installing ZeroTier on the Steam Deck, <strong>but this technique can be used to install any software on Steam Deck that is available for Arch Linux</strong> üëçÔ∏è</p><h1 id=installing-zerotier-on-steam-deck>Installing ZeroTier on Steam Deck</h1><p>The Steam Deck has a (<em>mostly</em>) read-only filesystem.
We&rsquo;ll use <a href=https://github.com/ValShaped/rwfus>Rwfus: Read-Write OverlayFS for your Steam Deck</a> to install ZeroTier so that it persists across reboots <em>and</em> SteamOS updates.</p><p>The author describes <code>rwfus</code> as:</p><blockquote><p>a vinyl couch cover for your filesystem, Rwfus covers your Deck&rsquo;s <code>/usr/</code> directory (and some others) allowing you to initialize and use <code>pacman</code> (the Arch Linux package manager) on the Steam Deck without losing packages when the next update comes out.</p></blockquote><p>Perfect üëåÔ∏è</p><h2 id=enter-the-desktop>Enter the Desktop</h2><p>The process of installing and configuring ZeroTier requires the use of the Steam Deck desktop mode.
Connecting a mouse üñ±Ô∏è and keyboard ‚å®Ô∏è to the Steam Deck will make this process much easier.
After the Steam Deck has booted you should Switch to Desktop.</p><ul><li>Press the &ldquo;Steam&rdquo; button on the Steam Deck and scroll down through the menu and select &ldquo;Power&rdquo;.</li><li>Then, select the &ldquo;Switch to Desktop&rdquo; option.</li><li>Once the desktop has loaded, click on the Steam Deck logo in the lower-left corner of the desktop to bring up the menu.</li><li>Select &ldquo;System&rdquo; in the left column and then &ldquo;Konsole&rdquo; from the right column.<ul><li>You can also press the Super key and type in &ldquo;Konsole&rdquo; in the search bar.</li></ul></li><li>Suddenly, as if by magic, the terminal appeared ü™Ñ</li></ul><p class=text-center><img src=./magic-terminal.webp class=img-fluid alt=Konsole><br><em>Konsole on Steam Deck</em></p><h2 id=set-a-password>Set a Password</h2><p>By default, no password üîìÔ∏è is set for the <code>deck</code> user.
With no password set, it is not possible to run commands in the root context using <code>sudo</code>.
Type <code>passwd</code> in the terminal to set a password.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>(deck@steamdeck ~) $ passwd
</span></span><span style=display:flex><span>New Password:
</span></span><span style=display:flex><span>Retype New Password:
</span></span></code></pre></div><h2 id=install-rwfus>Install Rwfus</h2><p>With that done we can install <code>rwfus</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>git clone https://github.com/ValShaped/rwfus.git
</span></span><span style=display:flex><span>cd rwfus
</span></span><span style=display:flex><span>./rwfus -iI
</span></span></code></pre></div><h2 id=install-zerotier>Install ZeroTier</h2><p>Run <code>sudo pacman -Sy</code> to update your repositories üåø
Now install ZeroTier.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo pacman -S zerotier-one
</span></span></code></pre></div><h3 id=enable-and-start-zerotier-service>Enable and Start ZeroTier service</h3><p>ZeroTier installs its systemd unit in <code>/usr/lib/systemd/system/</code>, but as we&rsquo;re installing while Rwfus is active that service file is installed into the Rwfus overlay.
This is a problem because running <code>systemctl enable zerotier-one</code> now would create a systemd unit in <code>/etc/systemd/system/multi-user.target.wants/</code> that references a file in <code>/usr</code>, and that file will not exist until Rwfus is running.
The effect is that the ZeroTier service will not start on boot as systemd will not be able to find the service file.</p><p>But there is a simple workaround, copy the ZeroTier service file to <code>/etc/systemd/system</code>, which is fine as <code>/etc</code> is already a writable overlay.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cp /usr/lib/systemd/system/zerotier-one.service /etc/systemd/system/zerotier-one.service
</span></span></code></pre></div><p>Now, enable and start the ZeroTier service.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo systemctl enable zerotier-one --now
</span></span></code></pre></div><h2 id=join-a-zerotier-network>Join a ZeroTier Network</h2><p>Find your ZeroTier device ID (a 10-digit hexadecimal number) by running:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo zerotier-cli info
</span></span></code></pre></div><p>The output will look üëÄ something like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>200 info deadbeef00 1.10.1 OFFLINE
</span></span></code></pre></div><p>Join a ZeroTier network using a network ID (a 16-digit hexadecimal number) which you can get from the <a href=https://my.zerotier.com/>My ZeroTier page</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo zerotier-cli join &lt;network id&gt;
</span></span></code></pre></div><p>Return to the <a href=https://my.zerotier.com/>My ZeroTier page</a> select the network you joined, scroll down to the Members section and authorize the Steam Deck device ID.</p><p>Verify that the Steam Deck is correctly allocated an IP address, this may take up to 30 seconds ‚è≥Ô∏è</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ip --brief addr | grep ^zt
</span></span></code></pre></div><p>You should see üëÅÔ∏è output similar to this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>zta1b2c3d4       UNKNOWN        192.168.192.59/24 baad::4a4a:faff:fefe:5aa5/64
</span></span></code></pre></div><h2 id=use-your-zerotier-network>Use your ZeroTier network</h2><p>You can now connect from your Steam Deck to other devices on the same ZeroTier network.
Or you could enable SSH on the Steam Deck and then log in to it from another device on the ZeroTier network üí™</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo systemctl enable sshd --now
</span></span></code></pre></div><h2 id=conclusion>Conclusion</h2><p>With ZeroTier installed on the Steam Deck, it is part of my network where ever I may roam; and enables some interesting possibilities such as remote play from anywhere in the world or <a href="https://steamcommunity.com/sharedfiles/filedetails/?id=2632149295">playing LAN multi-player games with remote friends</a>.
Share in the comments how you&rsquo;re using ZeroTier on your Steam Deck üí¨</p><p class=text-center><img src=./SteamDeck-ZeroTier.webp class=img-fluid alt="Steam Deck with ZeroTier"><br><em>Steam Deck</em></p><p>I&rsquo;ll be keeping my Steam Deck software modifications to a minimum ü§è but where I do make changes I&rsquo;ll be careful not to disrupt the SteamOS root file systems or potentially break SteamOS updates.
I&rsquo;m glad solutions like Rwfus exist to allow me to install the software I need. But&mldr;. ü§î</p><p><a href=https://nixos.org>Nix</a> is what I work on as my day job at <a href=https://determinate.systems>Determinate Systems</a> ‚ùÑÔ∏è
I&rsquo;m creating a little project that any Steam Deck owner can use to bring the power of Nix to Steam Deck while maintaining isolation from the SteamOS root file system.
That project depends on the <a href=https://github.com/DeterminateSystems/nix-installer>Determinate Nix Installer</a>, <strong>which natively supports Steam Deck</strong>.
So, if you want to get a head start with Nix on the Steam Deck then you can do that today üôÇ</p><div class="col-5 mt-2 mb-2 text-left"><a class="btn btn-light btn-lg col-12 disabled" href=#><span class=h2><em class="fa fa-chevron-circle-left" aria-hidden=true></em></span></a></div><div class="col-2 text-center"></div><div class="col-5 mt-2 mb-2 text-right"><a class="btn btn-primary btn-lg col-12" href=https://wimpysworld.com/posts/steambox-vs-steamdeck/ aria-label="Steam Box vs Steam Deck"><span class=h2><em class="fa fa-chevron-circle-right"></em></span></a></div><script src=https://giscus.app/client.js data-repo=flexiondotorg/flexiondotorg.github.io data-repo-id=R_kgDOIoJw9g data-category="Blog Comments" data-category-id=DIC_kwDOIoJw9s4CTG_3 data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=light data-lang crossorigin=anonymous async></script></div></section><section class="page-section portfolio col-12 col-lg-2 my-3"><div id=sidebar class=fixed><div class="widget pt-2"><h4 class="mb-1 widget-title text-secondary">Latest Posts</h4><ul class=list-unstyled><li class="d-flex my-1"><a href=https://wimpysworld.com/posts/steambox-vs-steamdeck/><h5>Steam Box vs Steam Deck</h5></a></li><li class="d-flex my-1"><a href=https://wimpysworld.com/posts/flash-stadia-controller-bluetooth-firmware-on-linux/><h5>Flash Stadia Controller Bluetooth Firmware on Linux</h5></a></li><li class="d-flex my-1"><a href=https://wimpysworld.com/posts/why-i-chose-the-thinkpad-z13-as-my-linux-laptop/><h5>Why I chose the ThinkPad Z13 Gen1 as my Linux laptop</h5></a></li></ul></div><div class="widget pt-2"><h4 class="mb-1 widget-title text-secondary">Related Posts</h4><ul class=list-unstyled><li class="d-flex my-1"><a href=https://wimpysworld.com/posts/steambox-vs-steamdeck/><h5>Steam Box vs Steam Deck</h5></a></li><li class="d-flex my-1"><a href=https://wimpysworld.com/posts/flash-stadia-controller-bluetooth-firmware-on-linux/><h5>Flash Stadia Controller Bluetooth Firmware on Linux</h5></a></li><li class="d-flex my-1"><a href=https://wimpysworld.com/projects/retro-home/><h5>Retro Home</h5></a></li></ul></div></div></section></div></div><footer class="footer text-center"><div class=container><div class=row><div class="col-lg-4 mb-5 mb-lg-0"><h3 class="text-uppercase mb-2">Social</h3><a class="btn btn-outline-light btn-social mx-1" href=https://wimpysworld.io/discord aria-label=Discord target=_blank rel="noopener noreferrer"><em class="fab fa-fw fa-discord"></em></a>
<a class="btn btn-outline-light btn-social mx-1" href=https://fosstodon.org/@wimpy aria-label=Mastodon target=_blank rel="noopener noreferrer"><em class="fab fa-fw fa-mastodon"></em></a>
<a class="btn btn-outline-light btn-social mx-1" href=https://twitter.com/m_wimpress aria-label=Twitter target=_blank rel="noopener noreferrer"><em class="fab fa-fw fa-twitter"></em></a>
<a class="btn btn-outline-light btn-social mx-1" href=https://linkedin.com/in/martinwimpress aria-label=LinkedIn target=_blank rel="noopener noreferrer"><em class="fab fa-fw fa-linkedin"></em></a></div><div class="col-lg-4 mb-5 mb-lg-0"><h3 class="text-uppercase mb-2">Code</h3><a class="btn btn-outline-light btn-social mx-1" href=https://github.com/flexiondotorg aria-label=GitHub target=_blank rel="noopener noreferrer"><em class="fab fa-fw fa-github"></em></a>
<a class="btn btn-outline-light btn-social mx-1" href=https://launchpad.net/~flexiondotorg aria-label=Launchpad target=_blank rel="noopener noreferrer"><em class="fab fa-fw fa-ubuntu"></em></a></div><div class=col-lg-4><h3 class="text-uppercase mb-2">Content</h3><a class="btn btn-outline-light btn-social mx-1" href=https://instagram.com/WimpysWorld aria-label=Instagram target=_blank rel="noopener noreferrer"><em class="fab fa-fw fa-instagram"></em></a>
<a class="btn btn-outline-light btn-social mx-1" href=https://twitch.tv/WimpysWorld aria-label=Twitch target=_blank rel="noopener noreferrer"><em class="fab fa-fw fa-twitch"></em></a>
<a class="btn btn-outline-light btn-social mx-1" href=https://youtube.com/WimpysWorld aria-label=YouTube target=_blank rel="noopener noreferrer"><em class="fab fa-fw fa-youtube"></em></a>
<a class="btn btn-outline-light btn-social mx-1" href=https://linuxmatters.sh aria-label=Podcast target=_blank rel="noopener noreferrer"><em class="fas fa-fw fa-podcast"></em></a></div></div></div></footer><div class="copyright py-4 text-center text-white"><div class=container><small>Copyright &copy; Martin Wimpress 2024</small></div></div><script defer src=https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.min.js integrity="sha512-OvBgP9A2JBgiRad/mM36mkzXSXaJE9BEIENnVEmeZdITvwT09xnxLtT4twkCa8m/loMbPHsvPl0T8lRGVBwjlQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script defer src=/js/scripts.js></script></body></html>